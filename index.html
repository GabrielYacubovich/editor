<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="fav.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Image Editor</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="image-container">
            <canvas style="max-height: none !important;" id="canvas" width="800" height="600"></canvas>
            <canvas id="magnifier" class="magnifier" style="display: none;"></canvas>
        </div>
        <div class="controls-wrapper">
            <div class="controls">
                <div class="adjustment-container">
                    <div class="adjustments">
                        <label>Brightness: 
                            <input type="range" id="brightness" min="0" max="2" step="0.01" value="1">
                        </label>
                        <label>Contrast: 
                            <input type="range" id="contrast" min="0" max="2" step="0.01" value="1">
                        </label>
                        <label>Saturation: 
                            <input type="range" id="saturation" min="0" max="2" step="0.01" value="1">
                        </label>
                        <label>Hue: 
                            <input type="range" id="hue" min="-180" max="180" step="1" value="0">
                        </label>
                        <label>Exposure: 
                            <input type="range" id="exposure" min="0" max="2" step="0.01" value="1">
                        </label>
                        <label>Highlights: 
                            <input type="range" id="highlights" min="-1" max="1" step="0.01" value="0">
                        </label>
                        <label>Shadows: 
                            <input type="range" id="shadows" min="-1" max="1" step="0.01" value="0">
                        </label>
                        <label>Blacks: 
                            <input type="range" id="blacks" min="-1" max="1" step="0.01" value="0">
                        </label>
                        <label>Whites: 
                            <input type="range" id="whites" min="-1" max="1" step="0.01" value="0">
                        </label>
                        <label>Temperature: 
                            <input type="range" id="temperature" min="-1" max="1" step="0.01" value="0">
                        </label>
                        <label>Tint: 
                            <input type="range" id="tint" min="-1" max="1" step="0.01" value="0">
                        </label>
                        <label>Sharpness: 
                            <input type="range" id="sharpness" min="0" max="2" step="0.01" value="0">
                        </label>
                        <label>Vignette: 
                            <input type="range" id="vignette" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>Noise: 
                            <input type="range" id="noise" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>Clarity: 
                            <input type="range" id="clarity" min="-1" max="1" step="0.01" value="0">
                        </label>
                        <label>Opacity: 
                            <input type="range" id="opacity" min="0" max="1" step="0.01" value="1">
                        </label>
                        <label>Gamma: 
                            <input type="range" id="gamma" min="0.1" max="3" step="0.01" value="1">
                        </label>
                        <label>Sepia: 
                            <input class="range" type="range" id="sepia" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>Vibrance: 
                            <input type="range" id="vibrance" min="-1" max="1" step="0.01" value="0">
                        </label>
                        <label>Grayscale: 
                            <input type="range" id="grayscale" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>Invert: 
                            <input type="range" id="invert" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>RGB Split: 
                            <input type="range" id="rgbSplit" min="0" max="0.2" step="0.001" value="0">
                        </label>
                        <label>Film Grain: 
                            <input type="range" id="filmGrain" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>Color Shift: 
                            <input type="range" id="colorShift" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>Wave Distortion: 
                            <input type="range" id="waveDistortion" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>Block Glitch: 
                            <input type="range" id="blockGlitch" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>Fractal Distortion: 
                            <input type="range" id="fractalDistortion" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>Ghosting: 
                            <input type="range" id="ghosting" min="0" max="0.5" step="0.01" value="0">
                        </label>
                        <label>Pixel Noise: 
                            <input type="range" id="pixelNoise" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>Scratch Texture: 
                            <input type="range" id="scratchTexture" min="0" max="1" step="0.01" value="0">
                        </label>
                        <label>Organic Distortion: 
                            <input type="range" id="organicDistortion" min="0" max="1" step="0.01" value="0">
                        </label>
                    </div>
                </div>
                <div style="padding-top: 20px;" class="buttons">
                    <input type="file" id="image-loader" accept="image/*" style="display: none;">
                    <button id="upload-btn">Upload</button>
                    <button id="crop">Crop</button>  
                    <button id="reset">Refresh</button>
                    <button id="undo">Undo</button>
                    <button id="redo">Redo</button>
                    <button id="toggle-original">Original</button>
                    <button id="export">Export</button>
                    <button class="hidden-mobile" id="toggle-zoom">Zoom</button>
                    <span class="hidden-mobile" id="zoom-control" style="display: none;">
                        <input class="hidden-mobile" type="number" id="zoom-level" min="50" max="1000" value="200" style="width: 65px; text-align: right;padding-right: 20px;">
                    </span>
                </div>
            </div>
        </div>
    </div>

    <div id="crop-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close-btn">×</span>
            <canvas id="crop-canvas"></canvas>
            <div id="crop-controls">
                <div class="crop-control-group">
                    <label for="cropRotation">Rotation:</label>
                    <input type="range" id="cropRotation" min="-180" max="180" value="0">
                    <span id="rotation-value">0°</span>
                </div>
                <div class="crop-control-group">
                    <label for="aspect-ratio">Aspect Ratio:</label>
                    <select id="aspect-ratio">
                        <option value="free">Free</option>
                        <option value="1:1">1:1 (Square)</option>
                        <option value="4:3">4:3</option>
                        <option value="3:2">3:2</option>
                        <option value="16:9">16:9</option>
                        <option value="9:16">9:16</option>
                        <option value="5:4">5:4</option>
                        <option value="4:5">4:5</option>
                    </select>
                </div>
                <div class="crop-control-group">
                    <label for="grid-type">Grid:</label>
                    <select id="grid-type">
                        <option value="none">None</option>
                        <option value="cross" selected>Cross</option>
                        <option value="rule-of-thirds">Rule of Thirds</option>
                        <option value="golden-ratio">Golden Ratio</option>
                        <option value="grid-3x3">3x3 Grid</option>
                        <option value="grid-4x4">4x4 Grid</option>
                    </select>
                </div>
                <div class="crop-button-group">
                    <button id="crop-restore">Reset</button>
                    <button id="crop-confirm">Apply</button>
                    <button id="crop-skip">Cancel</button>
                </div>
                <div class="crop-lock-group">
                    <input type="checkbox" id="lock-aspect">
                    <label for="lock-aspect">Lock Aspect Ratio</label>
                </div>
            </div>
        </div>
    </div>

    <div id="export-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close-btn">×</span>
            <h3>Export Image</h3>
            <label for="format">Format:</label>
            <select id="format">
                <option value="png">PNG</option>
                <option value="jpeg">JPEG</option>
            </select>
            <label for="quality">Quality:</label>
            <select id="quality">
                <option value="0.1">10%</option>
                <option value="0.2">20%</option>
                <option value="0.4">40%</option>
                <option value="0.6">60%</option>
                <option value="0.8">80%</option>
                <option value="1.0">100%</option>
            </select>
            <label for="filename">Filename:</label>
            <input type="text" id="filename" value="edited-image">
            <div class="modal-button-group">
                <button id="download-btn">Download</button>
                <button id="cancel-btn">Cancel</button>
            </div>
        </div>
    </div>

    <script src="main.js" type="module"></script>
</body>
</html>